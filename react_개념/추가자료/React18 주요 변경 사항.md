## 1. Concurrent Mode(λ™μ‹μ„± λ¨λ“)

κΈ°μ΅΄ Reactμ λ λ”λ§ λ°©μ‹μ€ **λ™κΈ°μ **μ΄μ—μµλ‹λ‹¤. μ¦‰, μ»΄ν¬λ„νΈκ°€ λ λ”λ§μ„ μ‹μ‘ν•λ©΄, μ¤‘κ°„μ— μ¤‘λ‹¨ν•μ§€ μ•κ³  μ‘μ—…μ„ λκΉμ§€ μ™„λ£ν•΄μ•Ό ν–μµλ‹λ‹¤. μ΄λ΅ μΈν•΄ λ λ”λ§ μ‘μ—…μ΄ μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬λ©΄ UIκ°€ μ¤‘λ‹¨λλ” ν„μƒ(μ: μ…λ ¥ μ§€μ—°, λλ¦° ν™”λ©΄ μ—…λ°μ΄νΈ)μ΄ λ°μƒν•  μ μμ—μµλ‹λ‹¤.

**React 18μ λ™μ‹μ„± λ¨λ“**λ” λ λ”λ§ μ‘μ—…μ„ **λ” μ‘μ€ λ‹¨μ„λ΅ λ¶„ν• **ν•μ—¬, μ¤‘μ”ν• μ‘μ—…(μ: μ‚¬μ©μ μ…λ ¥, μ• λ‹λ©”μ΄μ…)μ„ μ°μ„ μ μΌλ΅ μ²λ¦¬ν•κ³ , λ μ¤‘μ”ν• μ‘μ—…(μ: λ€λ‰μ λ°μ΄ν„° λ΅λ“ λ° λ λ”λ§)μ„ λ’¤λ΅ λ―Έλ£¨κ±°λ‚ λ‚μ¤‘μ— μ²λ¦¬ν•  μ μκ² ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ” λ‚μ€ μ‚¬μ©μ κ²½ν—μ„ μ κ³µν•©λ‹λ‹¤.

<br/>

## 2. μƒλ΅μ΄ Hooks

### useId

`useId`λ” μ»΄ν¬λ„νΈλ³„λ΅ μ λ‹ν¬ν• κ°’μ„ μƒμ„±ν•λ” μƒλ΅μ΄ ν›…μ…λ‹λ‹¤.

μ»΄ν¬λ„νΈ λ‚΄λ¶€μ—μ„ μ λ‹ν¬ν• κ°’μ„ μƒμ„±ν•λ” κ²ƒμ€ μƒκ°λ³΄λ‹¤ κΉλ‹¤λ΅­μµλ‹λ‹¤.

ν•λ‚μ μ»΄ν¬λ„νΈκ°€ μ—¬λ¬ κµ°λ°μ—μ„ μ¬μ‚¬μ©λλ” κ²½μ°λ„ κ³ λ ¤ν•΄μ•Ό ν•λ©°, λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ νΈλ¦¬μ—μ„ μ»΄ν¬λ„νΈκ°€ κ°€μ§€λ” λ¨λ“  κ°’μ΄ κ²ΉμΉμ§€ μ•κ³  λ¨λ‘ λ‹¬λΌμ•Ό ν•λ‹¤λ” μ΅°κ±΄λ„ μμµλ‹λ‹¤, λν•, SSR ν™κ²½μ—μ„ hydrationμ΄ λ°μƒν•  λ• μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ λ™μΌν• κ°’μ„ κ°€μ Έμ•Ό μ—λ¬κ°€ λ°μƒν•μ§€ μ•μ•„ μ΄λ¬ν• μ λ„ κ³ λ ¤ν•΄μ•Όν•©λ‹λ‹¤.

`useId`λ¥Ό μ‚¬μ©ν•λ©΄ μ„ λ¬Έμ λ“¤μ„ μλ™μΌλ΅ ν•΄κ²°ν•΄ μ£Όλ©°, νΈλ¦¬ν•κ² μ λ‹ν¬ν• idκ°’μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

<br/>

### useId μ‚¬μ© μμ‹ μ½”λ“

```jsx
import { useId } from 'react';

function FirstChild() {
	const id = useId();
	return <p>First ChildId: {id}</p>
}

function SecondChild() {
  const id = useId();
    return (
      <div>
        <Child/>
        <p>Second ChildId: {id}</p>
      </div>
    );
}

function App() {
  return (
    <div>
      <h1>HOME</h1>
      <FirstChild />
      <FirstChild />
      <SecondChild />
      <SecondChild />
    </div>
  );
}

export default App;
```

μ„ μ½”λ“λ¥Ό SSRμ‹ μ κ³µλλ” HTMLλ¥Ό λ³΄λ©΄ μ•„λμ™€ κ°™μµλ‹λ‹¤.

κ°™μ€ μ»΄ν¬λ„νΈλΌλ„ μ„λ΅ μΈμ¤ν„΄μ¤κ°€ λ‹¤λ¥΄λ©΄ λ‹¤λ¥Έ λλ¤ν• κ°’μ„ λ§λ“¤μ–΄λ‚΄λ©°, μ„λ²„ μ‚¬μ΄λ“μ™€ ν΄λΌμ΄μ–ΈνΈκ°„μ— λ™μΌν• κ°’μ΄ μƒμ„±λμ–΄ hydration λ¶μΌμΉ λ¬Έμ λ„ λ°μƒν•μ§€ μ•μµλ‹λ‹¤.

useIdκ°€ μƒμ„±ν• κ°’μ€ :μΌλ΅ κ°μ‹Έμ Έ μμΌλ©°, μ΄λ” querySelectorμ—μ„ μ‘λ™ν•μ§€ μ•λ„λ΅ ν•κΈ° μ„ν• μλ„μ μΈ κ²°κ³Όμ…λ‹λ‹¤. μ•κΈ€μκ°€ Rμ΄λ©΄ μ„λ²„μ—μ„ μƒμ„±λ κ°’μ΄λ©°, μ•κΈ€μκ°€ rμ΄λ©΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±λ κ°’μ…λ‹λ‹¤.

```jsx
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React SSR</title>
    <script defer src="main.js"></script>
  </head>
  <body>
    <div id="root">
      <div>
        <h1>HOME</h1>
        <p>
          First ChildId:
          <!-- -->:R2:
        </p>
        <p>
          First ChildId:
          <!-- -->:R3:
        </p>
        <div>
          <p>
            First ChildId:
            <!-- -->:Rs:
          </p>
          <p>
            Second ChildId:
            <!-- -->:R4:
          </p>
        </div>
        <div>
          <p>
            First ChildId:
            <!-- -->:Rt:
          </p>
          <p>
            Second ChildId:
            <!-- -->:R5:
          </p>
        </div>
      </div>
    </div>
  </body>
</html>
```

<br/>

### useTransition

`useTransition`μ€ λΉ„λ™κΈ° μ‘μ—…μ„ μ²λ¦¬ν•  λ• μ‚¬μ©λλ©°, νΉν, λ³µμ΅ν• μƒνƒ μ—…λ°μ΄νΈλ‚ UI λ λ”λ§μ΄ ν•„μ”ν•  λ• ν•΄λ‹Ή μ‘μ—…μ„ μ°μ„ μμ„κ°€ λ‚®μ€ μ‘μ—…μΌλ΅ μ²λ¦¬ν•μ—¬ μ‚¬μ©μ μΈν„°νμ΄μ¤κ°€ λκΉ€ μ—†μ΄ λ°μ‘ν•  μ μλ„λ΅ λ„μ™€μ¤λ‹λ‹¤.

<br/>

### useTransition λ°ν™κ°’

- `isPending` : μƒνƒ μ—…λ°μ΄νΈκ°€ μ§€μ—° μ¤‘μΈμ§€ μ—¬λ¶€λ¥Ό λ‚νƒ€λ‚΄λ” λ¶λ¦¬μ–Έ κ°’.
- `startTransition` : κΈ΄κΈ‰ν•μ§€ μ•μ€ μƒνƒ μ—…λ°μ΄νΈλ¥Ό μ‹¤ν–‰ν•λ” ν•¨μ.

```jsx
const [isPending, startTransition] = useTransition();

const handleClick = () => {
  startTransition(() => {
    // κΈ΄κΈ‰ν•μ§€ μ•μ€ μƒνƒ μ—…λ°μ΄νΈ
    setState(newValue);
  });
};
```

<br/>

### useTransition μ‚¬μ© μμ‹ μ½”λ“

`useTransition`μ„ μ‚¬μ©ν•΄ κ²€μƒ‰κ³Ό κ°™μ€ μ‘μ—…μ„ μ²λ¦¬ν•  λ•, κ²€μƒ‰μ–΄ μ…λ ¥μ€ μ¦‰μ‹ λ°μλμ§€λ§ κ²°κ³Ό λ©λ΅μ„ μ—…λ°μ΄νΈν•λ” μ‘μ—…μ€ μ°μ„ μμ„λ¥Ό λ‚®μ¶°μ„ UIκ°€ λκΈ°μ§€ μ•κ² μ²λ¦¬ν•λ” κ²½μ°μ…λ‹λ‹¤.

```jsx
import { useEffect, useState, useTransition } from "react";

function SearchComponent() {
  const [keyword, setKeyword] = useState(""); // μ…λ ¥κ°’μ€ μ¦‰μ‹ λ°μ
  const [list, setList] = useState([]);
  const [isPending, startTransition] = useTransition();
	const ITEMS = Array.from({ length: 5000 }, (_, i) => `Item ${i + 1}`);

  const filterItems = (query) => {
    return ITEMS.filter((item) => item.includes(query));
  };

  const handleChange = (e) => {
    const value = e.target.value;
    setKeyword(value);
  };

  useEffect(() => {
    // κ²€μƒ‰ κ²°κ³Ό μ—…λ°μ΄νΈλ” λ‚®μ€ μ°μ„ μμ„λ΅ μ²λ¦¬
    startTransition(() => {
      const filteredList = filterItems(keyword);
      setList(filteredList);
    });
  }, [keyword]);

  return (
    <div>
      <input
        type="text"
        value={keyword}
        onChange={handleChange}
        placeholder="Search..."
      />
      {/* κ²€μƒ‰ κ²°κ³Όκ°€ μ§€μ—°λ  λ• λ΅λ”© λ©”μ‹μ§€ ν‘μ‹ */}
      {isPending && <p>Updating list...</p>}
      <ul>
        {list.map((item, index) => (
          <li key={index}>{item}</li>
        ))}
      </ul>
    </div>
  );
}

export default SearchComponent;

```

- `startTransition` : κ²€μƒ‰ κ²°κ³Ό λ©λ΅μ„ μ—…λ°μ΄νΈν•λ” μ‘μ—…μ„ λ‚®μ€ μ°μ„ μμ„λ΅ μ²λ¦¬ν•©λ‹λ‹¤.
- `isPending` : νΈλμ§€μ…μ΄ μ§„ν–‰ μ¤‘μΌ λ• UIμ— "Updating list..."λ¥Ό λ³΄μ—¬μ¤μΌλ΅μ¨ λ΅λ”© μƒνƒλ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤.

<br/>

### useDeferredValue

`useTransition`μ€ ν•¨μ μ‹¤ν–‰μ μ°μ„ μμ„λ¥Ό μ§€μ •ν•λ” λ°λ©΄,Β `useDeferredValue`λ” κ°’μ μ—…λ°μ΄νΈ μ°μ„ μμ„λ¥Ό μ§€μ •ν•©λ‹λ‹¤. μ°μ„ μμ„κ°€ λ†’μ€ μ‘μ—…μ„ μ‹¤ν–‰ν•λ” λ™μ•Β `useMemo`μ™€ μ μ‚¬ν•κ² μ΄μ „ κ°’μ„ κ³„μ† λ“¤κ³  μμΌλ©΄μ„ μ—…λ°μ΄νΈλ¥Ό μ§€μ—°μ‹ν‚µλ‹λ‹¤.

μ΄ ν›…μ€Β `useMemo`μ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ λ” ν¨κ³Όκ°€ μΆ‹λ‹¤. μΆ…μ†λ κ°’λ“¤μ„ memoize μ‹ν‚¤λ©΄ λ¶ν•„μ”ν• μ¬ λλ”λ§μ„ λ§‰μΌλ©΄μ„ ν•μ„ μ»΄ν¬λ„νΈλ‚ μƒνƒμ μ—…λ°μ΄νΈλ¥Ό μ§€μ—°μ‹ν‚¬ μ μμµλ‹λ‹¤.

<br/>

### useDeferredValue μ‚¬μ© μμ‹

`useDeferredValue`λ” μ…λ ¥ ν•„λ“μ κ°’μ΄ λ³€κ²½λ  λ•, ν•΄λ‹Ή κ°’μ„ μ¦‰μ‹ λ°μν•μ§€ μ•κ³  μ§€μ—°μ‹μΌ λ¶ν•„μ”ν• λ¦¬λ λ”λ§μ„ λ°©μ§€ν•λ” λ° μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ•„λ μμ‹μ—μ„λ” μ‚¬μ©μκ°€ κ²€μƒ‰μ–΄λ¥Ό μ…λ ¥ν•  λ•, κ²€μƒ‰μ–΄ μ—…λ°μ΄νΈλ¥Ό μ§€μ—°μ‹μΌ μ„±λ¥μ„ μµμ ν™”ν•λ” μƒν™©μ…λ‹λ‹¤.

```jsx
import { useState, useDeferredValue, useEffect } from "react";

function App() {
  const [keyword, setKeyword] = useState("");
  const [list, setList] = useState([]);
  const deferredInput = useDeferredValue(keyword); // μ§€μ—°λ κ°’
	const ITEMS = Array.from({ length: 5000 }, (_, i) => `Item ${i + 1}`);
	
  const filterItems = (query) => {
    // κ°€μƒ λ°μ΄ν„° ν•„ν„°λ§ λ΅μ§ (μ: 5000κ°μ ν•­λ©μ„ ν•„ν„°λ§)
    return ITEMS.filter((item) => item.includes(query));
  };

  useEffect(() => {
    setList(filterItems(deferredInput));
  }, [deferredInput]);

  return (
    <div>
      <input
        type="text"
        value={keyword}
        onChange={(e) => setKeyword(e.target.value)}
        placeholder="Search..."
      />

      <ul>
        {list.map((item, index) => (
          <li key={index}>{item}</li>
        ))}
      </ul>
    </div>
  );
}

export default App;
```

- `useDeferredValue`λ” `keyword` κ°’μ„ μ§€μ—°μ‹μΌ μ„±λ¥μ„ μµμ ν™”ν•©λ‹λ‹¤. μ¦‰, μ‚¬μ©μκ°€ λΉ λ¥΄κ² μ…λ ¥ν•  λ• λ§¤λ² μ¦‰μ‹ ν•„ν„°λ§ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, μΌμ • μ‹κ°„ μ§€μ—°λ ν›„ λ§μ§€λ§‰ κ°’μΌλ΅ ν•„ν„°λ§ μ‘μ—…μ„ μν–‰ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ UI μ„±λ¥μ„ κ°μ„ ν•  μ μμµλ‹λ‹¤.
- κ²€μƒ‰μ–΄κ°€ μ…λ ¥λ  λ•λ§λ‹¤ λ°”λ΅ λ©λ΅μ„ μ—…λ°μ΄νΈν•μ§€ μ•κ³ , μΌμ • μ‹κ°„μ΄ μ§€λ‚λ©΄ μ—…λ°μ΄νΈλλ„λ΅ μ²λ¦¬ν•μ—¬ μ„±λ¥μ„ μµμ ν™”ν•©λ‹λ‹¤.

useTransitionκ³Ό useDeferredValueμ μμ„Έν• μ„¤λ…μ€ [18. useTransition & useDeferredValue](https://www.notion.so/18-useTransition-useDeferredValue-12212b90211180d6a8e1ed8dd66bad7f?pvs=21) λ¥Ό μ°Έκ³ ν•΄μ£Όμ„Έμ”.

<br/>

### useSyncExternalStore

React 18λ¶€ν„° `useTransition`,Β `useDeferredValue`μ™€ κ°™μ΄ λ λ”λ§μ„ μΌμ‹μ¤‘μ§€ν•κ±°λ‚, λ’¤λ΅ λ―Έλ£¨λ” λ“±μ λ™μ‹μ„± μµμ ν™”λ¥Ό λ„μ™€μ¤„ μ μλ” ν›…λ“¤μ΄ μ‚¬μ©ν• μμμµλ‹λ‹¤. ν•μ§€λ§ λ¦¬μ•΅νΈμ—μ„ μ΄λ ‡κ² λ™μ‹μ„± λ λ”λ§μ΄ κ°€λ¥ν•΄μ§€λ©΄μ„, μ™Έλ¶€ μ €μ¥μ†μ λ°μ΄ν„°λ¥Ό μ°Έμ΅°ν•λ” μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν• λ• κ°™μ€ μ‹κΈ°μ— λ λ”λ§μ„ ν–μ§€λ§, μ„λ΅ λ‹¤λ¥Έ μ‹μ μ λ°μ΄ν„°λ¥Ό μ°Έμ΅°ν•  μλ„ μλ”Β **Tearing**λ¬Έμ κ°€ λ°μƒν•  μ μμµλ‹λ‹¤.

**Tearing**μ΄λ€ λ¦¬μ•΅νΈμ—μ„λ” ν•λ‚μ state κ°’μ΄ μμμ—λ„ μ„λ΅ λ‹¤λ¥Έ κ°’μ„ κΈ°μ¤€μΌλ΅ λ λ”λ§λλ” ν„μƒμ„ μλ―Έν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, startTransitionμΌλ΅ λ λ”λ§μ„ μΌμ‹ μ¤‘μ§€ν•κ³  μΌμ‹ μ¤‘μ§€ κ³Όμ •μ—μ„ κ°’μ΄ μ—…λ°μ΄νΈλλ” κ²½μ° λ™μΌν• ν•λ‚μ λ³€μμ— λ€ν•΄μ„ μ„λ΅ λ‹¤λ¥Έ μ»΄ν¬λ„νΈ ν•νƒκ°€ λ‚νƒ€λ‚  μ μκ²λ©λ‹λ‹¤.

λ¦¬μ•΅νΈμ—μ„ κ΄€λ¦¬ν•λ” stateλΌλ©΄ useTransition, useDefferedValueμ™€ κ°™μ΄ λ‚΄λ¶€μ μΌλ΅ μ΄λ¬ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• μ²λ¦¬λ¥Ό ν•΄λ‘μ—μ§€λ§ κ΄€λ¦¬ν•  μ μ—†λ” μ™Έλ¶€ λ°μ΄ν„° μ†μ¤μ—μ„λ” λ¬Έμ κ°€ λ°μƒν•κ²λ©λ‹λ‹¤.

μ—¬κΈ°μ„, μ™Έλ¶€ λ°μ΄ν„° μ†μ¤λ€ λ¦¬μ•΅νΈμ ν΄λ΅μ € λ²”μ„ λ°–μ— μλ” κ°’λ“¤ κΈ€λ΅λ² λ³€μ, document.body, window.innerWidth, DOM, λ¦¬μ•΅νΈ μ™Έλ¶€μ— μƒνƒλ¥Ό μ €μ¥ν•λ” λΌμ΄λΈλ¬λ¦¬ λ“±μ„ λ§ν•©λ‹λ‹¤. μ΄ μ™Έλ¶€ λ°μ΄ν„° μ†μ¤μ Tearing ν„μƒμ„ ν•΄κ²°ν•λ” Hookμ΄ λ°”λ΅ `useSyncExternalStore`μ…λ‹λ‹¤.

```jsx
useSyncExternalStore(
  subscribe: (callback) => Unsubscribe
  getSanpshot: () => State
) => State
```

- μ²« λ²μ§Έ μΈμλ” subscribeλ΅ μ½λ°± ν•¨μλ¥Ό λ°›μ•„ μ¤ν† μ–΄μ— λ“±λ΅ν•λ” μ©λ„λ΅ μ‚¬μ©λ©λ‹λ‹¤. μ¤ν† μ— μλ” κ°’μ΄ λ³€κ²½λλ©΄ μ΄ μ½λ°±μ΄ νΈμ¶λλ©°, `useSyncExternalStore`λ¥Ό μ‚¬μ©ν•λ” μ»΄ν¬λ„νΈλ¥Ό λ¦¬λ λ”λ§ν•©λ‹λ‹¤.
- λ‘ λ²μ§Έ μΈμλ” μ»΄ν¬λ„νΈμ— ν•„μ”ν• μ¤ν† μ–΄μ λ°μ΄ν„°λ¥Ό λ°ν™ν•λ” ν•¨μμ…λ‹λ‹¤. μ΄ ν•¨μλ” μ¤ν† μ–΄κ°€ λ³€κ²½λμ§€ μ•μΌλ©΄ λ§¤λ² ν•¨μλ¥Ό νΈμ¶ν•  λ• λ§λ‹¤ λ™μΌν• κ°’μ„ λ°ν™ν•΄μ•Όν•©λ‹λ‹¤. μ¤ν† μ–΄μ—μ„ κ°’μ΄ λ³€κ²½λ¬λ‹¤λ©΄ μ΄ κ°’μ„ μ΄μ „ κ°’κ³Ό Object.isλ΅ λΉ„κµν•΄ κ°’μ΄ λ³€κ²½λμ—λ”μ§€ ν™•μΈν•κ³  μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•©λ‹λ‹¤.
- λ§μ§€λ§‰ μΈμλ” μµμ…”λ„ κ°’μΌλ΅, SSRμ‹ λ‚΄λ¶€ λ¦¬μ•΅νΈλ¥Ό hydrateν•λ” λ„μ¦μ—λ§ μ‚¬μ©λ©λ‹λ‹¤. SSRμ—μ„ λ λ”λ§λλ” ν›…μ΄λΌλ©΄ λ°λ“μ‹ μ΄ κ°’μ„ λ„κ²¨μ£Όμ–΄μ•Όν•©λ‹λ‹¤. λ§μ•½, ν΄λΌμ΄μ–ΈνΈμ™€ κ°’μ λ¶μΌμΉκ°€ λ°μƒν•λ‹¤λ©΄ μ¤λ¥κ°€ λ°μƒν•κ²λ©λ‹λ‹¤.

<br/>

### useSyncExternalStore μ‚¬μ© μμ‹

`useSyncExternalStore` λ¥Ό ν†µν•΄ ν„μ¬ μλ„μ°μ innerWidthλ¥Ό ν™•μΈν•λ” ν›…μ…λ‹λ‹¤. **innerWidth**λ” λ¦¬μ•΅νΈ μ™Έλ¶€μ— μλ” λ°μ΄ν„° κ°’μ΄λ―€λ΅ μ΄ κ°’μ λ³€κ²½ μ—¬λ¶€λ¥Ό ν™•μΈν•΄ λ¦¬λ λ”λ§κΉμ§€ μ΄μ–΄μ§€κ² ν•λ ¤λ©΄ `useSyncExternalStore`λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μ μ ν•©λ‹λ‹¤.

```jsx
import { useSyncExternalStore } from "react";

function subscribe(callback) {
  window.addEventListener("resize", callback);
  return () => {
    window.removeEventListener("resize", callback);
  };
}

const useInnerWidth = () => {
  const innerWidth = useSyncExternalStore(
    subscribe,
    () => window.innerWidth,
    () => 0
  );

  return innerWidth;
};

const App = () => {
  const windowSize = useInnerWidth();
  return <p>{windowSize}</p>;
};

export default App;
```

subscribe ν•¨μλ¥Ό μ²« λ²μ§Έ μΈμλ΅ λ„κ²¨ innerWidthκ°€ λ³€κ²½λ  λ• μΌμ–΄λ‚λ” μ½λ°±μ„ λ“±λ΅ν•μ€μµλ‹λ‹¤.

useSyncExternalStoreλ” subscribe ν•¨μμ μ²« λ²μ§Έ μΈμμΈ μ½λ°±μ„ μ¶”κ°€ν•΄ resize μ΄λ²¤νΈκ°€ λ°μƒν•  λ• λ§λ‹¤ ν•΄λ‹Ή μ½λ°±μ΄ μ‹¤ν–‰λ©λ‹λ‹¤.

λ‘ λ²μ§Έ μΈμλ΅ ν„μ¬ μ¤ν† μ–΄μ κ°’μΈ window.innerWidthλ¥Ό λ§μ§€λ§‰ μΈμλ΅ SSRμ—μ„ ν•΄λ‹Ή κ°’μ„ μ• μ μ—†μΌλ―€λ΅ 0λ¥Ό μ£Όμ—μµλ‹λ‹¤.

<br/>

### useInsertionEffect

`useInsertionEffect`λ” `useLayoutEffect`κ°€ λ™μ‘ν•κΈ° μ „μ— μ¤νƒ€μΌμ„ λ¨Όμ € μ΅°μ‘ν•κ² ν•΄μ£Όλ” ν›…μΌλ΅, CSS-in-js λΌμ΄λΈλ¬λ¦¬λ¥Ό μ„ν• ν›…μ…λ‹λ‹¤.

CSSμ μ¶”κ°€ λ° μμ •μ€ λΈλΌμ°μ €μ—μ„ λ λ”λ§ν•λ” μ‘μ—… λ€λ¶€λ¶„μ„ λ‹¤μ‹ κ³„μ‚°ν•΄ μ‘μ—…ν•΄μ•Όν•κΈ° λ•λ¬Έμ— λ¦¬μ•΅νΈ μ…μ¥μ—μ„λ” λ¨λ“  λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈκ°€ μν–¥μ„ λ―ΈμΉ  μ μλ” λ§¤μ° λ¬΄κ±°μ΄ μ‘μ—…μ…λ‹λ‹¤. λ”°λΌμ„ λ¦¬μ•΅νΈ 17κ³Ό styled-componentsμ—μ„λ” ν΄λΌμ΄μ–ΈνΈ λ λ”λ§ μ‹μ— μ΄λ¬ν• μ‘μ—…μ΄ λ°μƒν•μ§€ μ•λ„λ΅ μ„λ²„ μ‚¬μ΄λ“μ—μ„ μ¤νƒ€μΌ μ½”λ“λ¥Ό μ‚½μ…ν•μ€μµλ‹λ‹¤. λ°”λ΅ μ΄ μ‘μ—…μ„ λ„μ™€μ£Όλ” μƒλ΅μ΄ ν›…μ΄ `useInsertionEffect`μ…λ‹λ‹¤.

`useInsertionEffect`μ κΈ°λ³Έμ μΈ κµ¬μ΅°λ” `useEffect`μ™€ λ™μΌν•μ§€λ§ μ‹¤ν–‰ μ‹μ μ΄ λ‹¤λ¦…λ‹λ‹¤.

`useInsertionEffect`λ” DOMμ΄ μ‹¤μ λ΅ λ³€κ²½λμ§€ μ „μ— λ™κΈ°μ μΌλ΅ μ‹¤ν–‰λ©λ‹λ‹¤. μ΄ ν›… λ‚΄λ¶€μ— μ¤νƒ€μΌμ„ μ‚½μ…ν•λ” μ½”λ“λ¥Ό λ„£μ–΄ λΈλΌμ°μ €κ°€ λ μ΄μ•„μ›ƒμ„ κ³„μ‚°ν•κΈ° μ „μ— μ‹¤ν–‰ν•λ„λ΅ ν•μ—¬ μΆ€ λ” μμ—°μ¤λ¬μ΄ μ¤νƒ€μΌ μ‚½μ…μ΄ κ°€λ¥ν•©λ‹λ‹¤.

<br/>

**π’΅ useEffect vs useLayoutEffect vs useInsertionEffect**

μ‹¤ν–‰ μμ„λ” **useInsertionEffect > useLayoutEffect > useEffect** μμ…λ‹λ‹¤.

`useLayoutEffect`μ™€ λΉ„κµν–μ„ κ²½μ° μ‹¤ν–‰λλ” μ‹μ μ΄ λ―Έλ¬ν•κ² λ‹¤λ¦…λ‹λ‹¤. λ‘ ν›… λ¨λ‘ λΈλΌμ°μ €μ— DOMμ΄ λ λ”λ§ λκΈ° μ „μ— μ‹¤ν–‰λλ‹¤λ” κ³µν†µμ μ΄ μμ§€λ§ `useLayoutEffect`λ” λ¨λ“  DOMμ λ³€κ²½ μ‘μ—…μ΄ λ‹¤ λλ‚ μ΄ν›„μ— μ‹¤ν–‰λλ” λ°λ©΄ `useInsertionEffect`λ” DOMμ λ³€κ²½ μ‘μ—…μ΄ μ΄μ „μ— μ‹¤ν–‰λ©λ‹λ‹¤. λΈλΌμ°μ €κ°€ λ‹¤μ‹ μ¤νƒ€μΌμ„ μ…ν€μ„ **DOMμ„ μ¬κ³„μ‚°ν•μ§€ μ•μ•„λ„ λλ‹¤λ” μ **μ—μ„ μ°¨μ΄κ°€ λ‚κ²λ©λ‹λ‹¤.

<br/>

## 2. Automatic Batching

Automatic Batchingλ” Reactκ°€ μ—¬λ¬ μƒνƒ(state) μ—…λ°μ΄νΈλ¥Ό ν•λ‚μ λ λ”λ§ μ‘μ—…μΌλ΅ λ¬¶μ–΄ μ²λ¦¬ν•λ” λ°©μ‹μ…λ‹λ‹¤. μƒνƒ μ—…λ°μ΄νΈκ°€ λ°μƒν•  λ•λ§λ‹¤ λ¦¬λ λ”λ§μ„ ν•μ§€ μ•κ³ , μ—¬λ¬ κ°μ μƒνƒ μ—…λ°μ΄νΈλ¥Ό λ¨μ•„μ„ ν• λ²μ— μ²λ¦¬ν•λ” κ²ƒμ…λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ¦¬λ λ”λ§ νμλ¥Ό μ¤„μ—¬ μ• ν”λ¦¬μΌ€μ΄μ… μ„±λ¥μ΄ κ°μ„ λ©λ‹λ‹¤.

<br/>

### React 18 μ΄μ „ vs. μ΄ν›„μ μλ™ λ°°μΉ

React 18 μ΄μ „μ—λ” **React μ΄λ²¤νΈ ν•Έλ“¤λ¬** λ‚΄μ—μ„λ§ μλ™ λ°°μΉκ°€ λ™μ‘ν–μµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, λ²„νΌ ν΄λ¦­κ³Ό κ°™μ€ μ΄λ²¤νΈ ν•Έλ“¤λ¬μ—μ„ μ—¬λ¬ μƒνƒ μ—…λ°μ΄νΈκ°€ λ°μƒν•λ©΄ Reactκ°€ μ΄λ¥Ό μλ™μΌλ΅ λ°°μΉν•μ—¬ μ²λ¦¬ν–μµλ‹λ‹¤. κ·Έλ¬λ‚ λΉ„λ™κΈ° μ‘μ—…(μ: `setTimeout`, `Promise` λ“±μ μ½λ°±)μ—μ„λ” λ°°μΉκ°€ λ™μ‘ν•μ§€ μ•μ•μµλ‹λ‹¤.

**React 18**μ—μ„λ” μ΄λ¬ν• μλ™ λ°°μΉκ°€ **λΉ„λ™κΈ° ν•¨μ**μ™€ **νƒ€μ΄λ¨Έ** λ“±μ—μ„λ„ λ™μ‘ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, `setTimeout`, `fetch` μ½λ°±, λλ” `Promise` μ•μ—μ„ λ°μƒν•λ” μƒνƒ μ—…λ°μ΄νΈλ„ μλ™μΌλ΅ λ°°μΉλμ–΄ λ λ”λ§μ„ ν• λ²λ§ μν–‰ν•©λ‹λ‹¤.

```jsx
import { useState } from 'react';

function MyComponent() {
  const [count, setCount] = useState(0);
  const [text, setText] = useState('');

  const handleClick = () => {
    setTimeout(() => {
      // React 18 μ΄μ „μ—μ„λ” μ΄ λ‘ κ°μ μƒνƒ μ—…λ°μ΄νΈκ°€ κ°κ° λ λ”λ§μ„ λ°μƒμ‹μΌ°μµλ‹λ‹¤.
      setCount((c) => c + 1);
      setText('Updated');
    }, 1000);
  };

  return (
    <div>
      <p>{count}</p>
      <p>{text}</p>
      <button onClick={handleClick}>Update</button>
    </div>
  );
}
```

μ΄ μ½”λ“λ” `setTimeout` λ‚΄μ—μ„ λ‘ κ°€μ§€ μƒνƒ μ—…λ°μ΄νΈλ¥Ό λ°μƒμ‹ν‚¤μ§€λ§, **React 18**μ—μ„λ” μ΄ λ‘ μƒνƒ μ—…λ°μ΄νΈκ°€ μλ™μΌλ΅ λ°°μΉλμ–΄ ν• λ²μ λ λ”λ§λ§ μΌμ–΄λ‚©λ‹λ‹¤

<br/>

### Automatic Batching λΉ„ν™μ„±ν™” λ°©λ²•

νΉμ • κ²½μ°μ— μλ™ λ°°μΉλ¥Ό μ›ν•μ§€ μ•λ”λ‹¤λ©΄, `flushSync` ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ μ¦‰μ‹ μƒνƒ μ—…λ°μ΄νΈλ¥Ό κ°•μ λ΅ μν–‰ν•  μ μμµλ‹λ‹¤

```jsx
import { flushSync } from 'react-dom';

function handleClick() {
  flushSync(() => {
    setCount((c) => c + 1);
  });
  // μ—¬κΈ°μ„ μ¦‰μ‹ μƒνƒκ°€ λ°μλκ³  λ λ”λ§μ΄ λ°μƒν•©λ‹λ‹¤.
  flushSync(() => {
    setText('Updated');
  });
}
```

<br/>

## 3. creatRoot & hydreateRoot

`createRoot`μ™€ `hydrateRoot` λ©”μ„λ“λ” **Reactμ λ λ”λ§ μ—”μ§„**μ„ λ” ν¨μ¨μ μΌλ΅ κ°μ„ ν• μ¤‘μ”ν• κΈ°λ¥μ…λ‹λ‹¤. μ΄ λ‘ λ©”μ„λ“λ” κΈ°μ΅΄μ `ReactDOM.render`μ™€ `ReactDOM.hydrate`λ¥Ό λ€μ²΄ν•λ” λ°©μ‹μΌλ΅ λ„μ…λμ—μΌλ©°, **λ™μ‹μ„± λ¨λ“** λ° **μλ™ λ°°μΉ­** λ“±μ μƒλ΅μ΄ κΈ°λ¥κ³Ό λ°€μ ‘ν•κ² κ΄€λ ¨μ΄ μμµλ‹λ‹¤.

<br/>

### createRoot

React 18μ—μ„ `createRoot`λ” ν΄λΌμ΄μ–ΈνΈ λ λ”λ§μ„ μ‹μ‘ν•  λ• μ‚¬μ©ν•λ” λ©”μ„λ“λ΅, κΈ°μ΅΄μ `ReactDOM.render`λ¥Ό λ€μ²΄ν•©λ‹λ‹¤. React 18μ—μ„ `ReactDOM.render`λ” λ” μ΄μƒ κ¶μ¥λμ§€ μ•μΌλ©°, `createRoot`κ°€ μƒλ΅­κ² λ λ”λ§μ„ κ΄€λ¦¬ν•λ” λ°©μ‹μ…λ‹λ‹¤.

```jsx
import { createRoot } from 'react-dom/client';
import App from './App';

const container = document.getElementById('root');
const root = createRoot(container);

root.render(<App />);
```

- **λ™μ‹μ„± λ¨λ“ μ§€μ›**: `createRoot`λ” React 18μ **λ™μ‹μ„± λ¨λ“**λ¥Ό κΈ°λ³Έμ μΌλ΅ μ§€μ›ν•©λ‹λ‹¤. μ¦‰, λ λ”λ§ μ‘μ—…μ„ μ¤‘λ‹¨ν•κ±°λ‚ μ°μ„ μμ„λ¥Ό μ΅°μ •ν•  μ μλ” κΈ°λ¥μ΄ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ Reactλ” ν° μ—…λ°μ΄νΈλ¥Ό μ¦‰μ‹ λ λ”λ§ν•μ§€ μ•κ³ , μ¤‘μ”ν• μ‘μ—…κ³Ό λ μ¤‘μ”ν• μ‘μ—…μ„ κµ¬λ¶„ν•μ—¬ μ‚¬μ©μ κ²½ν—μ„ κ°μ„ ν•  μ μμµλ‹λ‹¤.
- **μλ™ λ°°μΉ­**: `createRoot`λ¥Ό μ‚¬μ©ν•  κ²½μ°, λ¨λ“  μƒνƒ μ—…λ°μ΄νΈλ” μλ™μΌλ΅ λ°°μΉ­λ©λ‹λ‹¤. μ΄μ „μ—λ” μ΄λ²¤νΈ ν•Έλ“¤λ¬ λ‚΄λ¶€μ—μ„λ§ μƒνƒ μ—…λ°μ΄νΈκ°€ λ°°μΉ­λμ—μ§€λ§, React 18μ—μ„λ” `setTimeout`, `Promise`μ™€ κ°™μ€ λΉ„λ™κΈ° μ‘μ—… λ‚΄μ—μ„λ„ λ°°μΉ­μ΄ μ μ©λ©λ‹λ‹¤. μ΄λ” λ¶ν•„μ”ν• λ¦¬λ λ”λ§μ„ μ¤„μ—¬ μ„±λ¥μ„ μµμ ν™”ν•©λ‹λ‹¤.

<br/>

### hydrateRoot

React 18μ—μ„ λ„μ…λ `hydrateRoot`λ” **μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)** ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„ UIλ¥Ό **ν•μ΄λ“λ μ΄μ…**(hydration)ν•λ” λ©”μ„λ“μ…λ‹λ‹¤. κΈ°μ΅΄μ `ReactDOM.hydrate`λ” `hydrateRoot`λ΅ λ€μ²΄λμ—μΌλ©°, μ΄ μ—­μ‹ λ™μ‹μ„± λ¨λ“μ™€ μλ™ λ°°μΉ­ λ“±μ κΈ°λ¥μ„ ν¬ν•¨ν•©λ‹λ‹¤.

```jsx
import { hydrateRoot } from 'react-dom/client';
import App from './App';

const container = document.getElementById('root');
hydrateRoot(container, <App />);
```

- **λ™μ‹μ„± λ¨λ“ μ§€μ›**: `hydrateRoot` μ—­μ‹ λ™μ‹μ„± λ¨λ“λ¥Ό μ§€μ›ν•©λ‹λ‹¤. λ™μ‹μ„± λ¨λ“λ” κΈ°μ΅΄μ SSR ν™κ²½μ—μ„ μ„λ²„μ—μ„ λ λ”λ§λ HTMLμ„ ν΄λΌμ΄μ–ΈνΈμ—μ„ ν•μ΄λ“λ μ΄μ…ν•  λ• **λ” μ μ—°ν• λ λ”λ§**μ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤. ν•μ΄λ“λ μ΄μ… μ¤‘μ—λ„ Reactλ” μ¤‘μ”ν• μ‚¬μ©μ μ΄λ²¤νΈλ¥Ό μ°μ„ μ μΌλ΅ μ²λ¦¬ν•κ³ , λ μ¤‘μ”ν• μ‘μ—…μ€ λ‚μ¤‘μ— μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
- **μ„ νƒμ  ν•μ΄λ“λ μ΄μ…(Selective Hydration)**: `hydrateRoot`λ” React 18μ—μ„ **μ„ νƒμ  ν•μ΄λ“λ μ΄μ…** κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤. μ΄λ” μ„λ²„μ—μ„ λ λ”λ§λ HTMLμ΄ ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬λ  λ•, μ‚¬μ©μκ°€ μƒνΈμ‘μ©ν•λ” λ¶€λ¶„λ§ μ°μ„ μ μΌλ΅ ν•μ΄λ“λ μ΄μ…ν•μ—¬ μ΄κΈ° μ„±λ¥μ„ μµμ ν™”ν•  μ μμµλ‹λ‹¤. λ‚λ¨Έμ§€ UI λ¶€λ¶„μ€ λ°±κ·ΈλΌμ΄λ“μ—μ„ μ²μ²ν ν•μ΄λ“λ μ΄μ…λ©λ‹λ‹¤.

<br/>

## 4. React Server Components(RSC)

**μ„λ²„ μ»΄ν¬λ„νΈ**λ” React 18μ—μ„ λ„μ…λ μƒλ΅μ΄ κ°λ…μΌλ΅, React μ»΄ν¬λ„νΈλ¥Ό μ„λ²„μ—μ„λ§ λ λ”λ§ν•κ³  ν΄λΌμ΄μ–ΈνΈλ΅λ” κ·Έ κ²°κ³Όλ§μ„ μ „λ‹¬ν•©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ™€ λ‹¬λ¦¬ μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ— JavaScript μ½”λ“λ‚ μƒνƒ κ΄€λ¦¬λ¥Ό μ „λ‹¬ν•μ§€ μ•κ³ , HTMLκ³Ό κ°™μ€ μµμΆ… κ²°κ³Όλ§ μ „λ‹¬ν•λ―€λ΅ **ν΄λΌμ΄μ–ΈνΈμ μμ› μ†λΉ„λ¥Ό μµμ†ν™”**ν•  μ μμµλ‹λ‹¤.

<br/>

### React Server Componentsμ νΉμ§•

- **μ„λ²„μ—μ„λ§ λ λ”λ§**: μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅λκΈ° μ „μ— μ„λ²„μ—μ„ μ‹¤ν–‰λκ³ , ν•΄λ‹Ή μ»΄ν¬λ„νΈμ κ²°κ³Όλ§ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λ©λ‹λ‹¤. λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈλ” μ»΄ν¬λ„νΈμ JavaScriptλ¥Ό λ‹¤μ΄λ΅λ“ν•κ±°λ‚ μ‹¤ν–‰ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤.
- **μƒνƒ κ΄€λ¦¬ λ¶ν•„μ”**: μ„λ²„ μ»΄ν¬λ„νΈλ” **μƒνƒ(state)**, **μ΄λ²¤νΈ ν•Έλ“¤λ¬** λ“±μ ν΄λΌμ΄μ–ΈνΈ μΈ΅ λ™μ‘μ„ μ²λ¦¬ν•μ§€ μ•μµλ‹λ‹¤. μ„λ²„ μ»΄ν¬λ„νΈλ” λ‹¨μν μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€μ„ μ΄λ¥Ό κΈ°λ°μΌλ΅ λ λ”λ§ κ²°κ³Όλ¥Ό μƒμ„±ν•κ³  ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•©λ‹λ‹¤.
- **ν΄λΌμ΄μ–ΈνΈμ™€μ κ²°ν•©**: μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ™€ κ²°ν•©λμ–΄ λ™μ‘ν•  μ μμµλ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μΈν„°λ™ν‹°λΈν• UIλ¥Ό μ κ³µν•λ” λ°λ©΄, μ„λ²„ μ»΄ν¬λ„νΈλ” λ°μ΄ν„°λ¥Ό κΈ°λ°μΌλ΅ μ •μ μΈ μ½ν…μΈ λ¥Ό λ λ”λ§ν•λ” λ° μ£Όλ΅ μ‚¬μ©λ©λ‹λ‹¤.
- **κ²½λ‰ ν΄λΌμ΄μ–ΈνΈ λ λ”λ§**: μ„λ²„ μ»΄ν¬λ„νΈμ κ²°κ³Όλ΅ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λλ” κ²ƒμ€ **μμν• HTML**μ΄λ©°, ν΄λΌμ΄μ–ΈνΈλ” μ΄λ¥Ό λΉ λ¥΄κ² λ λ”λ§ν•  μ μμµλ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈμ—μ„ λ” μ μ€ μμ›μ„ μ‚¬μ©ν•λ―€λ΅ μ„±λ¥μ„ μµμ ν™”ν•  μ μμµλ‹λ‹¤.

<br/>

### React Server Componentsμ μ‚¬μ©

- μ„λ²„ μ»΄ν¬λ„νΈλ” μΌλ°μ μΌλ΅ `.server.js` ν™•μ¥μλ¥Ό μ‚¬μ©ν•μ—¬ νμΌμ„ κµ¬λ¶„ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ Reactλ” ν•΄λ‹Ή μ»΄ν¬λ„νΈκ°€ μ„λ²„μ—μ„λ§ μ‹¤ν–‰λλ‹¤λ” κ²ƒμ„ μΈμ‹ν•κ³ , ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λμ§€ μ•λ„λ΅ ν•©λ‹λ‹¤.
    
    ```jsx
    // MyComponent.server.js (μ„λ²„ μ»΄ν¬λ„νΈ)
    import React from 'react';
    
    export default function MyComponent() {
      const data = fetchDataFromServer(); // μ„λ²„ μΈ΅μ—μ„λ§ μ‹¤ν–‰λλ” λ΅μ§
      return <div>Data: {data}</div>;
    }
    ```
    
- μ„λ²„ μ»΄ν¬λ„νΈλ” μ„λ²„μ—μ„λ§ μ‹¤ν–‰λλ―€λ΅, **μ„λ²„ μΈ΅ API νΈμ¶μ΄λ‚ λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬**λ¥Ό μ§μ ‘ μν–‰ν•  μ μμµλ‹λ‹¤. μ΄ λ°©μ‹μ€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„ λΉ„λ™κΈ° λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ” κ²ƒλ³΄λ‹¤ λ” ν¨μ¨μ μ…λ‹λ‹¤.
    
    ```jsx
    // DataFetchingComponent.server.js
    import React from 'react';
    import fetchDataFromAPI from './api';
    
    export default async function DataFetchingComponent() {
      const data = await fetchDataFromAPI();
      return (
        <div>
          <h1>Fetched Data:</h1>
          <pre>{JSON.stringify(data, null, 2)}</pre>
        </div>
      );
    }
    ```
    
- μ„λ²„ μ»΄ν¬λ„νΈμ—μ„λ” `useState`, `useEffect`μ™€ κ°™μ€ ν΄λΌμ΄μ–ΈνΈ μ „μ© ν›…μ΄λ‚ APIλ¥Ό μ‚¬μ©ν•  μ μ—†μµλ‹λ‹¤. μ΄λ” μ„λ²„ μ»΄ν¬λ„νΈκ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§λμ§€ μ•κΈ° λ•λ¬Έμ— μλ―Έκ°€ μ—†κΈ° λ•λ¬Έμ…λ‹λ‹¤.
    
    ```jsx
    // μλ»λ μ‚¬μ© (μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ ν΄λΌμ΄μ–ΈνΈ ν›… μ‚¬μ© λ¶κ°€)
    export default function MyComponent() {
      const [state, setState] = useState(0); // μ¤λ¥ λ°μƒ
      return <div>State: {state}</div>;
    }
    ```
    
- μ„λ²„ μ»΄ν¬λ„νΈμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό κ²°ν•©ν•  μ μμµλ‹λ‹¤. μ„λ²„μ—μ„ λ°μ΄ν„°λ‚ μ •μ μΈ UIλ¥Ό μ²λ¦¬ν• λ‹¤μ, ν΄λΌμ΄μ–ΈνΈμ—μ„ μ¶”κ°€μ μΈ μƒνΈμ‘μ©μ„ μ κ³µν•λ” λ°©μ‹μ…λ‹λ‹¤. μ„λ²„ μ»΄ν¬λ„νΈλ” λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•κ³ , ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ‚¬μ©μμ™€μ μƒνΈμ‘μ©μ„ μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
    
    ```jsx
    // MyComponent.server.js (μ„λ²„ μ»΄ν¬λ„νΈ)
    import React from 'react';
    import InteractiveComponent from './InteractiveComponent.client'; // ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ μ„ν¬νΈ
    
    export default function MyComponent() {
      const data = fetchDataFromServer();
      return (
        <div>
          <h1>Server Rendered Data: {data}</h1>
          <InteractiveComponent /> {/* ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ λ”λ§ */}
        </div>
      );
    }
    
    ```
    
    ```jsx
    // InteractiveComponent.client.js (ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ)
    import React, { useState } from 'react';
    
    export default function InteractiveComponent() {
      const [count, setCount] = useState(0);
      return (
        <div>
          <p>Count: {count}</p>
          <button onClick={() => setCount(count + 1)}>Increment</button>
        </div>
      );
    }
    ```
    
<br/>

### React Server Componentsμ™€ κΈ°μ΅΄ SSRμ μ°¨μ΄

κΈ°μ΅΄μ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)κ³Ό μ„λ²„ μ»΄ν¬λ„νΈλ” λΉ„μ·ν• κ°λ…μ²λΌ λ³΄μΌ μ μμ§€λ§, λ‘ κ°€μ§€λ” λ³Έμ§μ μΌλ΅ λ‹¤λ¥Έ λ°©μ‹μ…λ‹λ‹¤:

- **SSR**: μ„λ²„μ—μ„ μ „μ²΄ React μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ λ”λ§ν•κ³ , ν΄λΌμ΄μ–ΈνΈμ— ν•΄λ‹Ή HTMLμ„ μ „λ‹¬ν•©λ‹λ‹¤. μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„ ν•μ΄λ“λ μ΄μ…μ„ ν†µν•΄ JavaScriptκ°€ μ‹¤ν–‰λμ–΄ μΈν„°λ™ν‹°λΈν• UIκ°€ λ©λ‹λ‹¤.
- **μ„λ²„ μ»΄ν¬λ„νΈ**: μ„λ²„μ—μ„ νΉμ • μ»΄ν¬λ„νΈλ§ λ λ”λ§ν•κ³ , κ·Έ κ²°κ³Όλ§ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬ν•μ—¬ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ™€ κ²°ν•©ν•©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„ μ»΄ν¬λ„νΈμ κ²°κ³Όλ§ λ λ”λ§ν•κ³ , ν•΄λ‹Ή JavaScriptλ” μ‹¤ν–‰ν•μ§€ μ•μµλ‹λ‹¤.

<br/>

## 5. Suspense

**React 18**μ—μ„λ” `Suspense` κΈ°λ¥μ΄ ν™•μ¥λκ³  κ°•ν™”λμ—μµλ‹λ‹¤. κΈ°μ΅΄μ—λ” `Suspense`κ°€ μ£Όλ΅ **μ½”λ“ μ¤ν”λ¦¬ν…**κ³Ό κ°™μ€ νΉμ • μ©λ„λ΅λ§ μ‚¬μ©λμ—μ§€λ§, React 18μ—μ„λ” **λΉ„λ™κΈ° λ°μ΄ν„° λ΅λ”©**μ„ ν¬ν•¨ν• λ‹¤μ–‘ν• λΉ„λ™κΈ° μ‘μ—…μ„ μ²λ¦¬ν•λ” λ°μ— ν™μ©ν•  μ μλ„λ΅ κ°μ„ λμ—μµλ‹λ‹¤

<br/>

### Suspense μ£Όμ” λ³€κ²½μ 

**1 ) λΉ„λ™κΈ° λ°μ΄ν„° ν¨μΉ­ μ§€μ›**

- React 18 μ΄μ „μ—λ” `Suspense`κ°€ μ£Όλ΅ `React.lazy`λ¥Ό ν†µν• **μ½”λ“ μ¤ν”λ¦¬ν…**μ—μ„λ§ μ‚¬μ©λμ—μµλ‹λ‹¤. ν•μ§€λ§ React 18λ¶€ν„°λ” μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό λ΅λ”©ν•  λ•λ„ `Suspense`λ¥Ό μ‚¬μ©ν•  μ μκ² λμ—μµλ‹λ‹¤. μ¦‰, μ»΄ν¬λ„νΈκ°€ ν•„μ”ν• λ°μ΄ν„°λ¥Ό λΉ„λ™κΈ°μ μΌλ΅ λ¶λ¬μ¤λ” κ³Όμ •μ—μ„ κ·Έ μƒνƒλ¥Ό κ΄€λ¦¬ν•  μ μκ² λμ—μµλ‹λ‹¤.
- μ΄λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” λ™μ•μ— **λ΅λ”© UI**λ¥Ό ν‘μ‹ν•κ±°λ‚, λ°μ΄ν„°κ°€ μ¤€λΉ„λκΈ° μ „μ— μ»΄ν¬λ„νΈλ¥Ό λ―Έλ¦¬ λ λ”λ§ν•μ§€ μ•λ„λ΅ μ μ–΄ν•  μ μμµλ‹λ‹¤.

**2 ) μ„λ²„ μ»΄ν¬λ„νΈμ™€ ν•¨κ» μ‚¬μ© κ°€λ¥**

- React 18μ μƒλ΅μ΄ κΈ°λ¥μΈ **μ„λ²„ μ»΄ν¬λ„νΈ(Server Components)**μ™€λ„ `Suspense`λ¥Ό ν•¨κ» μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό λ―Έλ¦¬ ν¨μΉ­ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬ν•κ³ , ν΄λΌμ΄μ–ΈνΈλ” μ΄ λ°μ΄ν„°λ¥Ό λ°›μ•„ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•©λ‹λ‹¤. μ΄ κ³Όμ •μ—μ„ ν•„μ”ν• κ³³μ— `Suspense`λ¥Ό λ°°μΉν•μ—¬ μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό λ¶λ¬μ¤λ” λ™μ• λ΅λ”© μƒνƒλ¥Ό μ²λ¦¬ν•  μ μμµλ‹λ‹¤.

**3 ) λ™μ‹μ„± λ¨λ“μ™€μ ν†µν•©**

- React 18μ—μ„ μ¶”κ°€λ **λ™μ‹μ„± κΈ°λ¥(Concurrent Features)**κ³Ό `Suspense`κ°€ κΈ΄λ°€ν•κ² ν†µν•©λμ—μµλ‹λ‹¤. λ™μ‹μ„± λ¨λ“μ—μ„λ” Reactκ°€ λ°±κ·ΈλΌμ΄λ“μ—μ„ μ—¬λ¬ λ λ”λ§ μ‘μ—…μ„ λ™μ‹μ— μ²λ¦¬ν•  μ μλ”λ°, μ΄ κ³Όμ •μ—μ„ `Suspense`κ°€ μ¤‘μ”ν• μ—­ν• μ„ ν•©λ‹λ‹¤.
- `Suspense`λ¥Ό ν†µν•΄ Reactλ” λΉ„λ™κΈ° λ°μ΄ν„° λ΅λ”©μ΄ μ™„λ£λ  λ•κΉμ§€ λ λ”λ§μ„ μ§€μ—°μ‹ν‚¬ μ μμΌλ©°, ν•„μ”ν• λ°μ΄ν„°λ¥Ό λ‹¤ λ¶λ¬μ¤κΈ° μ „μ— λ¶ν•„μ”ν• λ λ”λ§μ΄ λ°μƒν•μ§€ μ•λ„λ΅ λ°©μ§€ν•©λ‹λ‹¤.

**4 ) νΈλμ§€μ…κ³Ό κ²°ν•©**

- React 18μ λ λ‹¤λ¥Έ κΈ°λ¥μΈ **νΈλμ§€μ…(Transitions)**κ³Όλ„ `Suspense`λ¥Ό ν•¨κ» μ‚¬μ©ν•  μ μμµλ‹λ‹¤. νΈλμ§€μ…μ€ λλ¦° UI μ—…λ°μ΄νΈ(μ: νμ΄μ§€ μ „ν™)μ—μ„ μ‚¬μ©μ κ²½ν—μ„ λ¶€λ“λ½κ² λ§λ“¤μ–΄ μ£Όλ”λ°, `Suspense`μ™€ κ²°ν•©ν•λ©΄ νΈλμ§€μ… λ™μ• λ°μ΄ν„°λ¥Ό λ¶λ¬μ¤λ” κ³Όμ •μ—μ„ λ΅λ”© μƒνƒλ¥Ό λ” μμ—°μ¤λ½κ² μ²λ¦¬ν•  μ μμµλ‹λ‹¤.

<br/>

### Suspense μ‚¬μ© μμ‹

μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)κ³Ό `Suspense`μ ν†µν•©μΌλ΅, μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό λ―Έλ¦¬ ν¨μΉ­ν•κ³  μ΄ λ°μ΄ν„°λ¥Ό κΈ°λ°μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•  μ μμµλ‹λ‹¤. 

```jsx
import { Suspense } from 'react';

function ServerSideComponent() {
  // μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό λ¶λ¬μ¤λ” λ™μ• Suspenseκ°€ λ΅λ”© μƒνƒλ¥Ό ν‘μ‹ν•©λ‹λ‹¤.
  return (
    <Suspense fallback={<div>Loading from server...</div>}>
      <DataFetchingComponent />
    </Suspense>
  );
}
```

<br/>

## μ°Έκ³  μλ£
[λ¨λ λ¦¬μ•΅νΈ Deep Dive](https://wikibook.co.kr/react-deep-dive/)