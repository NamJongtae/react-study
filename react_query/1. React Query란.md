# 1. React Query란 ?

## 1. React Query ?

> 서버 상태관리를 하는 라이브러입니다.


React Query는 API 호출과 같은 비동기 작업을 수행하고, 서버에서 가져온 데이터를 캐시하며, 이 캐시된 데이터를 활용하여 애플리케이션의 성능을 향상시킵니다. 또한, 데이터의 상태를 관리하고, 데이터를 자동으로 업데이트하거나, 데이터를 동기화하는 기능도 제공합니다.

React Query를 사용하면 애플리케이션의 상태 관리를 좀 더 효율적으로 할 수 있으며, 코드를 단순화할 수 있습니다. 따라서 개발자는 비즈니스 로직에 더 집중할 수 있습니다.

<br/>

## 2. Client State vs Server state

### Client State

브라우저 또는 클라이언트 측 어플리케이션 내에서 관리되는 상태를 말합니다. 예를 들어, 사용자가 폼에 입력하는 값, 체크박스의 상태, UI의 상태(드롭다운 메뉴가 열려 있는지 등) 등이 클라이언트 상태에 해당합니다. 이러한 상태는 직접적으로 사용자의 인터랙션에 의해 변경되며, 일반적으로는 서버에 저장되거나 동기화되지 않습니다.

<br/>

### Server State

서버에서 관리되고, 클라이언트와 서버 간에 동기화되는 상태를 말합니다. 예를 들어, 사용자의 프로필 정보, 게시물 데이터, 사용자의 팔로잉 목록 등이 서버 상태에 해당합니다. 이러한 상태는 호출을 통해 가져오거나 변경되며, 서버에서 관리되기 때문에 여러 클라이언트에 동기화될 수 있습니다.

두 가지 상태 모두 애플리케이션에서 중요한 역할을 하지만, 사용 방식과 관리 방법은 매우 다릅니다. 클라이언트 상태는 주로 UI 상태를 관리하며, 서버 상태는 주로 사용자 데이터와 관련된 비즈니스 로직을 관리합니다. 따라서 애플리케이션의 요구 사항에 따라 적절한 상태 관리 전략을 선택해야 합니다.

<br/>

## 3. React Query에서 제공하는 기능

### 1 ) 서버 관리 상태 제공

React Query는 애플리케이션의 서버 상태를 관리하는 도구입니다. 이는 서버에서 가져온 데이터를 캐시하고, 이 캐시된 데이터를 효율적으로 업데이트하고 동기화함으로써 이루어집니다. 이렇게 함으로써 애플리케이션은 항상 최신의 서버 상태를 반영하게 되며, 이를 위한 복잡한 로직을 직접 관리할 필요가 없게 됩니다.

<br/>

### 2 ) Prefetching

Prefetching은 사용자가 특정 데이터를 요청하기 전에 미리 데이터를 가져오는 기능입니다. 예를 들어, 사용자가 리스트 항목을 클릭하여 상세 페이지로 이동하는 경우, 상세 페이지의 데이터를 미리 가져와 빠르게 보여줄 수 있습니다. 이는 사용자 경험을 향상시키는 데 크게 기여합니다.

<br/>

### **3 ) Pagination & infinite Scroll**

React Query는 페이지네이션과 무한 스크롤을 쉽게 구현할 수 있도록 도와줍니다. 이는 대량의 데이터를 효율적으로 로드하고 관리하는데 필요한 도구를 제공합니다. `useInfiniteQuery` 훅을 사용하여 무한 스크롤을 구현할 수 있습니다.

<br/>

### 4 ) Mutation

Mutation은 서버에서 데이터를 생성, 업데이트, 삭제하는 작업을 수행하는데 사용됩니다. React Query의 `useMutation` 훅을 사용하면 이러한 작업을 쉽게 수행할 수 있으며, 동시에 이러한 작업의 상태(로딩, 완료, 에러 등)를 관리할 수 있습니다.

<br/>

### 5 ) 중복 요청 방지

React Query는 동일한 데이터에 대한 중복 요청을 자동으로 방지합니다. 즉, 이미 진행 중인 동일한 요청이 있을 경우, 새로운 요청을 보내지 않고 기존 요청의 결과를 재사용합니다. 이는 서버의 부하를 줄이고 애플리케이션의 성능을 향상시킵니다.

<br/>

### 6 ) 에러 처리 및 재요청

React Query는 요청이 실패했을 때 자동으로 재요청을 수행하는 기능을 제공합니다. 또한, 에러 발생 시 이를 캡처하여 개발자가 쉽게 에러를 처리할 수 있도록 도와줍니다. 이러한 기능은 애플리케이션의 안정성을 높이는 데 도움이 됩니다.

<br/>

## 4. React Query 적용하기

### **React Query 설치 방법**

React Query를 사용하기 위해서는 먼저 npm을 통해 설치해야 합니다. 터미널에서 아래의 명령을 실행하면 됩니다

```bash
npm install @tanstack/react-query
```

<br/>

### **React Query 적용 방법**

React Query를 애플리케이션에 적용하기 위해서는 `QueryClient`를 생성하고, 이를 `QueryClientProvider`를 통해 애플리케이션에 제공해야 합니다. 아래는 React Query를 애플리케이션에 적용하는 예시 코드입니다.

이렇게 하면 React Query를 사용할 준비가 완료됩니다.

```bash
import { QueryClient, QueryClientProvider } from 'react-query';

const queryClient = new QueryClient();

function App() {
    return (
        <QueryClientProvider client={queryClient}>
            {/* 여기에 애플리케이션의 나머지 부분이 들어갑니다. */}
        </QueryClientProvider>
    );
}

```